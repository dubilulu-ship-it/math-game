<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>×—×™×‘×•×¨ ×¢×“ 20 â€“ ×©× ×™ ×¡×œ×™× (×™×“×™×ª ×§×˜× ×”)</title>
<style>
  :root{
    --fruit: 52px;  /* ×’×•×“×œ ×”×ª×¤×•×— */
    --gap: 8px;
  }
  body{margin:0;font-family:Arial,"Segoe UI",system-ui,sans-serif;
       background:linear-gradient(180deg,#eaf4ff 0%,#f6fbff 40%);}
  .app{max-width:1100px;margin:auto;padding:18px;display:grid;gap:16px}
  header{background:#fff;border-radius:16px;padding:12px 16px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;box-shadow:0 4px 14px rgba(0,0,0,.12)}
  .title{font-size:22px;font-weight:800;display:flex;gap:8px;align-items:center}
  .btn{padding:8px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
  .btn.primary{background:#2563eb;color:#fff}
  .btn.ghost{background:#e8f0ff}
  .board{display:grid;grid-template-columns:1fr 0.8fr;gap:16px}
  @media(max-width:900px){.board{grid-template-columns:1fr}}
  .card{background:#fff;border-radius:16px;padding:16px;box-shadow:0 4px 14px rgba(0,0,0,.1)}

  .eq{font-size:28px;font-weight:900}
  .status{background:#eef7ff;color:#1e3a8a;padding:4px 10px;border-radius:999px;font-weight:700}

  .tray{min-height:150px;border:2px dashed #c7d2fe;border-radius:16px;padding:12px;background:#f8fbff}
  .grid{display:flex;flex-wrap:wrap;gap:var(--gap)}
  .fruit{
    width:var(--fruit);height:var(--fruit);
    display:flex;align-items:center;justify-content:center;
    font-size:calc(var(--fruit)*0.65);
    background:#fff;border:1px solid #ddd;border-radius:14px;cursor:grab;
    box-shadow:0 2px 8px rgba(0,0,0,.12);
    user-select:none;touch-action:none;transition:transform .12s ease;
  }
  .fruit:active{transform:scale(1.05)}

  .baskets{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media(max-width:700px){.baskets{grid-template-columns:1fr}}

  /* ===== ×¡×œ ×§×© ===== */
  .basket{
    position:relative; min-height:240px; border-radius:18px; overflow:hidden;
    border:2px solid #c08552; background:#fff8f0; padding:12px; isolation:isolate;
  }
  .basket .label{
    position:relative; z-index:4; font-weight:900; color:#7c4a2b;
    display:flex; align-items:center; gap:8px; margin-bottom:6px;
  }
  .basket::before{
    content:""; position:absolute; inset:18% 6% 10% 6%; z-index:0; pointer-events:none;
    background:
      linear-gradient(90deg,#d7a273 22%,#bd8456 22% 28%,#d7a273 28% 50%,
                             #bd8456 50% 56%,#d7a273 56% 78%,#bd8456 78% 84%,#d7a273 84%) 0 0/56px 18px,
      linear-gradient(0deg,#bd8456 22%,#d7a273 22% 28%,#bd8456 28% 50%,
                             #d7a273 50% 56%,#bd8456 56% 78%,#d7a273 78% 84%,#bd8456 84%) 0 0/56px 18px;
    border-radius:14px;
    box-shadow:inset 0 -20px 30px rgba(0,0,0,.05);
  }
  .basket .inner{position:absolute; inset:22% 8% 8% 8%; z-index:1}
  .basket .inner .grid{justify-content:flex-start}
  .basket::after{
    content:""; position:absolute; left:5%; right:5%; top:6%; height:28px; z-index:2; pointer-events:none;
    background:linear-gradient(180deg,#e9b789,#cc905f); border-radius:18px/14px;
    box-shadow:inset 0 2px 0 #f4d1ae, 0 6px 10px rgba(0,0,0,.18);
  }
  /* ×™×“×™×ª ×§×˜× ×” ×•×¢×“×™× ×” */
  .handle{
    position:absolute; top:-6px; left:50%; transform:translateX(-50%); z-index:3; pointer-events:none;
    width:40%; height:40px;   /* <<< ××•×§×˜×Ÿ ×××•×“ <<< */
    border:6px solid #cc905f; border-bottom:none; border-radius:999px;
    box-shadow:0 3px 6px rgba(0,0,0,.15), inset 0 2px 0 #e9b789;
    background:conic-gradient(from 0deg at 50% 100%,#dba577,#c18455 25%,#dba577 50%,#c18455 75%,#dba577 100%);
  }

  .answers{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
  .opt{flex:1;min-width:80px;background:#eef2f7;border:2px solid transparent;border-radius:12px;padding:10px;
       font-size:20px;font-weight:800;cursor:pointer;transition:.15s}
  .opt:hover{transform:translateY(-1px)}
  .opt.correct{background:#ecfdf5;border-color:#10b981;color:#065f46}
  .opt.wrong{background:#fef2f2;border-color:#ef4444;color:#991b1b}

  .stats{display:flex;gap:10px;margin-top:10px}
  .pill{flex:1;background:#eef2f7;border-radius:10px;padding:8px;text-align:center;font-weight:700}
  .pill.good{background:#ecfdf5;color:#065f46}
  .pill.bad{background:#fef2f2;color:#991b1b}
</style>
</head>
<body>
<div class="app">
  <header>
    <div class="title">ğŸ ×—×™×‘×•×¨ ×¢×“ 20 â€“ ×©× ×™ ×¡×œ×™× (×™×“×™×ª ×§×˜× ×”)</div>
    <div>
      <button id="empty" class="btn ghost">×¨×•×§×Ÿ ×¡×œ×™×</button>
      <button id="newRound" class="btn primary">×¡×™×‘×•×‘ ×—×“×©</button>
    </div>
  </header>

  <main class="board">
    <section class="card">
      <div style="display:flex;justify-content:space-between;margin-bottom:8px">
        <div class="eq" id="equation">? + ? = ?</div>
        <div class="status" id="status">××•×›×Ÿ</div>
      </div>

      <h4>××’×© ×ª×¤×•×—×™×</h4>
      <div class="tray grid" id="tray"></div>

      <div class="baskets">
        <div class="basket" id="basketA">
          <div class="handle"></div>
          <div class="label">×¡×œ A</div>
          <div class="inner"><div class="grid" id="gridA"></div></div>
        </div>
        <div class="basket" id="basketB">
          <div class="handle"></div>
          <div class="label">×¡×œ B</div>
          <div class="inner"><div class="grid" id="gridB"></div></div>
        </div>
      </div>

      <div class="answers" id="answers"></div>
      <div class="stats">
        <div class="pill good">× ×™×¦×—×•× ×•×ª: <span id="wins">0</span></div>
        <div class="pill bad">× ×™×¡×™×•× ×•×ª: <span id="misses">0</span></div>
      </div>
    </section>
  </main>
</div>

<script>
const $=s=>document.querySelector(s);
const tray=$("#tray"),eqEl=$("#equation"),statusEl=$("#status"),answers=$("#answers");
const wins=$("#wins"),misses=$("#misses"),gridA=$("#gridA"),gridB=$("#gridB"),basketA=$("#basketA"),basketB=$("#basketB");
let state={a:0,b:0,sum:0,wins:0,misses:0};

function randInt(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
function announce(m,t="info"){statusEl.textContent=m;}
function newProblem(){
  let a=randInt(0,10),b=randInt(0,10);while(a+b>20||a+b<2){a=randInt(0,10);b=randInt(0,10);}
  state.a=a;state.b=b;state.sum=a+b;eqEl.textContent=`${a}+${b}=?`;
  tray.innerHTML="";gridA.innerHTML="";gridB.innerHTML="";answers.innerHTML="";
  for(let i=0;i<24;i++){tray.appendChild(makeApple());}
  const opts=new Set([state.sum]);while(opts.size<3){opts.add(Math.max(0,Math.min(20,state.sum+randInt(-3,3))));}
  [...opts].sort(()=>Math.random()-0.5).forEach(n=>{
    const btn=document.createElement("button");btn.className="opt";btn.textContent=n;
    btn.onclick=()=>check(btn,n);answers.appendChild(btn);
  });
}
let id=1;
function makeApple(){
  const e=document.createElement("div");e.className="fruit";e.textContent="ğŸ";e.dataset.id="a"+id++;
  e.onclick=()=>{if(e.parentElement===tray){
      if(gridA.children.length<state.a)gridA.appendChild(e);
      else if(gridB.children.length<state.b)gridB.appendChild(e);
    }else tray.appendChild(e);};
  return e;
}
function check(btn,n){
  [...answers.children].forEach(b=>b.classList.remove("correct","wrong"));
  const okA=gridA.children.length===state.a,okB=gridB.children.length===state.b;
  if(n===state.sum&&okA&&okB){btn.classList.add("correct");state.wins++;wins.textContent=state.wins;announce("×›×œ ×”×›×‘×•×“!");}
  else{btn.classList.add("wrong");state.misses++;misses.textContent=state.misses;announce("× ×¡×” ×©×•×‘");}
}
$("#newRound").onclick=newProblem;
$("#empty").onclick=()=>{[...gridA.children,...gridB.children].forEach(ch=>tray.appendChild(ch));};
newProblem();
</script>
</body>
</html>
